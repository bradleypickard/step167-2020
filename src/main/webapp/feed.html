<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Melting Pot</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Page content -->
    <h1>
      Recipes
    </h1>
    <br />
    <a href="/submit-recipe.html">Add your own recipe!</a>
    <br />

    <ul id="recipe-list"></ul>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-auth.js"></script>

    <!-- Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Page scripts -->
    <script type="module">
      import { app } from "/scripts/init.js"

      let recipeList = document.getElementById("recipe-list")
      fetch("/api/post").then(async (response) => {
        if (response.status < 200 || response.status >= 300) {
          alert("Error " + response.status.toString())
        } else {
          let recipes = await response.json()
          recipes.forEach((recipe) => {
            recipeList.innerHTML +=
              '<li><a href="recipe-display.html?recipeID=' + recipe.id + '">' + recipe.title + "</a></li>"
          })
        }
      })
    </script>
  </body>
</html>
